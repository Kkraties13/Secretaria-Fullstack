<!-- sidebar.html -->

<!-- Sidebar - Recolhível em desktop, oculto/overlay em mobile -->
<aside id="sidebar" class="w-64 space-y-6 py-7 px-2 bg-white border-r border-gray-200 shadow-xl transition-all duration-300 ease-in-out fixed inset-y-0 left-0 z-30 flex-shrink-0 md:relative md:translate-x-0">
    <!-- Título/Logo -->
    <div class="px-4 flex items-center justify-between">
        <h1 class="text-2xl font-extrabold text-indigo-600 tracking-wider flex items-center">
            <i class="ph-bold ph-graduation-cap text-3xl mr-2"></i>
            <span class="sidebar-text">School TCC</span>
        </h1>
        <!-- Botão para recolher sidebar (visível apenas em desktop) -->
        <button id="collapse-button" class="hidden md:block text-gray-600 hover:text-gray-900 transition duration-150 ease-in-out">
            <i class="ph ph-caret-left text-xl"></i>
        </button>
    </div>

    <!-- Navegação Principal -->
    <nav class="space-y-1">
        <a href="{% url 'school:index' %}" class="flex items-center space-x-2 py-2.5 px-4 rounded-lg transition duration-200 hover:bg-indigo-50 hover:text-indigo-700 text-gray-700 {% if request.resolver_match.url_name == 'dashboard' %}bg-indigo-100 text-indigo-800 font-semibold{% endif %}">
            <i class="ph ph-house text-xl"></i>
            <span class="sidebar-text">Dashboard</span>
        </a>
        <a href="{% url 'school:alunos_index' %}" class="flex items-center space-x-2 py-2.5 px-4 rounded-lg transition duration-200 hover:bg-indigo-50 hover:text-indigo-700 text-gray-700">
            <i class="ph ph-users-three text-xl"></i>
            <span class="sidebar-text">Alunos</span>
        </a>
        <a href="{% url 'school:professor_index' %}" class="flex items-center space-x-2 py-2.5 px-4 rounded-lg transition duration-200 hover:bg-indigo-50 hover:text-indigo-700 text-gray-700">
            <i class="ph ph-identification-card text-xl"></i>
            <span class="sidebar-text">Professores</span>
        </a>
        <a href="{% url 'school:turmas_index' %}" class="flex items-center space-x-2 py-2.5 px-4 rounded-lg transition duration-200 hover:bg-indigo-50 hover:text-indigo-700 text-gray-700">
            <i class="ph ph-chalkboard text-xl"></i>
            <span class="sidebar-text">Aulas/Disciplinas</span>
        </a>
    </nav>
</aside>

<!-- Backdrop para mobile -->
<div class="fixed inset-0 bg-black bg-opacity-50 z-20 md:hidden hidden" id="sidebar-backdrop"></div>

<!-- Script para controle da sidebar -->
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const sidebar = document.getElementById('sidebar');
        const backdrop = document.getElementById('sidebar-backdrop');
        const menuBtn = document.getElementById('menu-button');
        const collapseBtn = document.getElementById('collapse-button');
        const contentWrapper = document.getElementById('content-wrapper');

        // Toggle para mobile
        const toggleSidebarMobile = () => {
            sidebar.classList.toggle('-translate-x-full');
            backdrop.classList.toggle('hidden');
        };

        if (menuBtn) {
            menuBtn.addEventListener('click', toggleSidebarMobile);
        }
        if (backdrop) {
            backdrop.addEventListener('click', toggleSidebarMobile);
        }

        // Toggle para collapse em desktop
        if (collapseBtn) {
            collapseBtn.addEventListener('click', () => {
                sidebar.classList.toggle('w-64');
                sidebar.classList.toggle('w-20');
                contentWrapper.classList.toggle('md:ml-64');
                contentWrapper.classList.toggle('md:ml-20');
                
                // Alternar visibilidade de textos e ícone do botão
                document.querySelectorAll('.sidebar-text').forEach(el => {
                    el.classList.toggle('hidden');
                });
                collapseBtn.querySelector('i').classList.toggle('ph-caret-left');
                collapseBtn.querySelector('i').classList.toggle('ph-caret-right');
            });
        }
    });
</script>   